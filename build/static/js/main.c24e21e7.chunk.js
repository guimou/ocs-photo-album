(this["webpackJsonpocs-photo-album"]=this["webpackJsonpocs-photo-album"]||[]).push([[0],{41:function(e,t,a){e.exports=a(71)},46:function(e,t,a){},47:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(11),r=a.n(o),c=(a(46),a(31)),i=a(32),s=a(39),u=a(33),d=a(40),m=(a(47),a(48),a(19)),h=a.n(m),f=a(10),p=(a(66),a(17)),g=a(36),b=a(37),y=a(13),E=a(34),k=a(16),v=a(9),w=a(38),S=a(20),F=a(75),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).checkMimeType=function(e){for(var t=e.target.files,a=[],n=["image/png","image/jpeg","image/gif"],l=function(e){n.every((function(a){return t[e].type!==a}))&&(a[e]=t[e].type+" is not a supported format\n")},o=0;o<t.length;o++)l(o);for(var r=0;r<a.length;r++)f.b.error(a[r]),e.target.value=null;return!0},a.maxSelectFile=function(e){if(e.target.files.length>3){return e.target.value=null,f.b.warn("Only 3 images can be uploaded at a time"),!1}return!0},a.checkFileSize=function(e){for(var t=e.target.files,a=[],n=0;n<t.length;n++)t[n].size>2e6&&(a[n]=t[n].type+"is too large, please pick a smaller file\n");for(var l=0;l<a.length;l++)f.b.error(a[l]),e.target.value=null;return!0},a.onChangeHandler=function(e){var t=e.target.files;a.maxSelectFile(e)&&a.checkMimeType(e)&&a.checkFileSize(e)&&a.setState({selectedFile:t,loaded:0})},a.onClickHandler=function(){var e=new FormData;if(null!==a.state.selectedFile){for(var t=0;t<a.state.selectedFile.length;t++)e.append("file",a.state.selectedFile[t]);h.a.post("/upload",e,{onUploadProgress:function(e){a.setState({loaded:e.loaded/e.total*100})}}).then((function(e){f.b.success("upload success")})).catch((function(e){f.b.error("upload fail"),console.log(e)}))}else f.b.warn("Select a file first...")},a.state={selectedFile:null,loaded:0,slides:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"identifyUser",value:function(){var e="",t=localStorage.getItem("ocsphotoid");return t&&""!==t?e=t:(e=Object(F.a)(),localStorage.setItem("ocsphotoid",e)),e}},{key:"componentDidMount",value:function(){this.identifyUser()}},{key:"updateSlides",value:function(e){0!==e.length&&this.setState({slides:e})}},{key:"loadImagesList",value:function(){var e=this;h.a.get("/listimages").then((function(t){console.log(t.data),e.updateSlides(t.data)})).catch((function(e){f.b.error("cannot get images list..."+e),console.log(e)}))}},{key:"render",value:function(){return l.a.createElement(E.a,{className:"background"},l.a.createElement(k.a,null,l.a.createElement(v.a,{xs:8},l.a.createElement("h2",null,"Welcome to your Photo Album!"),l.a.createElement("p",null,"The first time you upload a picture (png, jpg, gif, less than 2MB), a dedicated bucket will be created for you, and the images will be stored there. When you reconnect, you'll be automatically linked to this bucket, and you can continue to upload pictures.",l.a.createElement("br",null),'This basic "authentication" works with a cookie, so if you clear it, you\'ll simply loose access. In a real application, an authentication mechanism would allow for proper reconnection.',l.a.createElement("br",null),"The buckets and their content are automatically deleted after 24 hours.")),l.a.createElement(v.a,null,l.a.createElement(p.a,null,l.a.createElement(y.a,null,l.a.createElement(p.a.Label,null,"Upload Your File "),l.a.createElement(p.a.Control,{type:"file",multiple:!0,onChange:this.onChangeHandler})),l.a.createElement(f.a,null),l.a.createElement(y.a,null,l.a.createElement(g.a,{max:"100",color:"success",value:this.state.loaded},Math.round(this.state.loaded,2),"%")),l.a.createElement(b.a,{type:"button",className:"btn btn-success btn-block",onClick:this.onClickHandler},"Upload")))),l.a.createElement(k.a,null,l.a.createElement(v.a,null,"\xa0")),l.a.createElement(k.a,null,l.a.createElement(v.a,null),l.a.createElement(v.a,{xs:10},l.a.createElement("h2",null,"And here are your pictures!"),l.a.createElement(S.a,null,this.state.slides.map((function(e,t){var a="/image/"+e;return l.a.createElement(S.a.Item,null,l.a.createElement(w.a,{key:t,className:"d-block w-50",src:a,rounded:!0}))})))),l.a.createElement(v.a,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.c24e21e7.chunk.js.map